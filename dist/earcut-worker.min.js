var Te=Object.create;var te=Object.defineProperty;var _e=Object.getOwnPropertyDescriptor;var Ee=Object.getOwnPropertyNames;var ke=Object.getPrototypeOf,Ie=Object.prototype.hasOwnProperty;var z=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ae=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Ee(t))!Ie.call(e,o)&&o!==n&&te(e,o,{get:()=>t[o],enumerable:!(r=_e(t,o))||r.enumerable});return e};var Ve=(e,t,n)=>(n=e!=null?Te(ke(e)):{},Ae(t||!e||!e.__esModule?te(n,"default",{value:e,enumerable:!0}):n,e));var re=z((_t,ne)=>{"use strict";ne.exports=e=>e?typeof Symbol.observable=="symbol"&&typeof e[Symbol.observable]=="function"?e===e[Symbol.observable]():typeof e["@@observable"]=="function"?e===e["@@observable"]():!1:!1});var ie=z(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.DefaultSerializer=T.extendSerializer=void 0;function We(e,t){let n=e.deserialize.bind(e),r=e.serialize.bind(e);return{deserialize(o){return t.deserialize(o,n)},serialize(o){return t.serialize(o,r)}}}T.extendSerializer=We;var oe={deserialize(e){return Object.assign(Error(e.message),{name:e.name,stack:e.stack})},serialize(e){return{__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack}}},Ze=e=>e&&typeof e=="object"&&"__error_marker"in e&&e.__error_marker==="$$error";T.DefaultSerializer={deserialize(e){return Ze(e)?oe.deserialize(e):e},serialize(e){return e instanceof Error?oe.serialize(e):e}}});var G=z(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.serialize=D.deserialize=D.registerSerializer=void 0;var se=ie(),O=se.DefaultSerializer;function Oe(e){O=se.extendSerializer(O,e)}D.registerSerializer=Oe;function Be(e){return O.deserialize(e)}D.deserialize=Be;function $e(e){return O.serialize(e)}D.serialize=$e});var le=z(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.$worker=S.$transferable=S.$terminate=S.$events=S.$errors=void 0;S.$errors=Symbol("thread.errors");S.$events=Symbol("thread.events");S.$terminate=Symbol("thread.terminate");S.$transferable=Symbol("thread.transferable");S.$worker=Symbol("thread.worker")});var N=z(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});_.Transfer=_.isTransferDescriptor=void 0;var ce=le();function je(e){return!(!e||typeof e!="object")}function Fe(e){return e&&typeof e=="object"&&e[ce.$transferable]}_.isTransferDescriptor=Fe;function Re(e,t){if(!t){if(!je(e))throw Error();t=[e]}return{[ce.$transferable]:!0,send:e,transferables:t}}_.Transfer=Re});var ue=z(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.WorkerMessageType=b.MasterMessageType=void 0;var He;(function(e){e.cancel="cancel",e.run="run"})(He=b.MasterMessageType||(b.MasterMessageType={}));var Ge;(function(e){e.error="error",e.init="init",e.result="result",e.running="running",e.uncaughtError="uncaughtError"})(Ge=b.WorkerMessageType||(b.WorkerMessageType={}))});var fe=z(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});var Ne=function(){let t=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!t)},Je=function(t,n){self.postMessage(t,n)},Ke=function(t){let n=o=>{t(o.data)},r=()=>{self.removeEventListener("message",n)};return self.addEventListener("message",n),r};J.default={isWorkerRuntime:Ne,postMessageToMaster:Je,subscribeToMasterMessages:Ke}});var he=z(M=>{"use strict";var Ue=M&&M.__awaiter||function(e,t,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function l(f){try{c(r.next(f))}catch(a){i(a)}}function u(f){try{c(r.throw(f))}catch(a){i(a)}}function c(f){f.done?s(f.value):o(f.value).then(l,u)}c((r=r.apply(e,t||[])).next())})},pe=M&&M.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(M,"__esModule",{value:!0});M.expose=M.isWorkerRuntime=M.Transfer=M.registerSerializer=void 0;var qe=pe(re()),C=G(),Qe=N(),L=ue(),v=pe(fe()),Xe=G();Object.defineProperty(M,"registerSerializer",{enumerable:!0,get:function(){return Xe.registerSerializer}});var Ye=N();Object.defineProperty(M,"Transfer",{enumerable:!0,get:function(){return Ye.Transfer}});M.isWorkerRuntime=v.default.isWorkerRuntime;var ae=!1,k=new Map,et=e=>e&&e.type===L.MasterMessageType.cancel,ge=e=>e&&e.type===L.MasterMessageType.run,ye=e=>qe.default(e)||tt(e);function tt(e){return e&&typeof e=="object"&&typeof e.subscribe=="function"}function xe(e){return Qe.isTransferDescriptor(e)?{payload:e.send,transferables:e.transferables}:{payload:e,transferables:void 0}}function nt(){let e={type:L.WorkerMessageType.init,exposed:{type:"function"}};v.default.postMessageToMaster(e)}function rt(e){let t={type:L.WorkerMessageType.init,exposed:{type:"module",methods:e}};v.default.postMessageToMaster(t)}function K(e,t){let{payload:n,transferables:r}=xe(t),o={type:L.WorkerMessageType.error,uid:e,error:C.serialize(n)};v.default.postMessageToMaster(o,r)}function U(e,t,n){let{payload:r,transferables:o}=xe(n),s={type:L.WorkerMessageType.result,uid:e,complete:t?!0:void 0,payload:r};v.default.postMessageToMaster(s,o)}function ot(e,t){let n={type:L.WorkerMessageType.running,uid:e,resultType:t};v.default.postMessageToMaster(n)}function B(e){try{let t={type:L.WorkerMessageType.uncaughtError,error:C.serialize(e)};v.default.postMessageToMaster(t)}catch(t){console.error(`Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.
Latest error:`,t,`
Original error:`,e)}}function de(e,t,n){return Ue(this,void 0,void 0,function*(){let r;try{r=t(...n)}catch(s){return K(e,s)}let o=ye(r)?"observable":"promise";if(ot(e,o),ye(r)){let s=r.subscribe(i=>U(e,!1,C.serialize(i)),i=>{K(e,C.serialize(i)),k.delete(e)},()=>{U(e,!0),k.delete(e)});k.set(e,s)}else try{let s=yield r;U(e,!0,C.serialize(s))}catch(s){K(e,C.serialize(s))}})}function it(e){if(!v.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(ae)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(ae=!0,typeof e=="function")v.default.subscribeToMasterMessages(t=>{ge(t)&&!t.method&&de(t.uid,e,t.args.map(C.deserialize))}),nt();else if(typeof e=="object"&&e){v.default.subscribeToMasterMessages(n=>{ge(n)&&n.method&&de(n.uid,e[n.method],n.args.map(C.deserialize))});let t=Object.keys(e).filter(n=>typeof e[n]=="function");rt(t)}else throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${e}`);v.default.subscribeToMasterMessages(t=>{if(et(t)){let n=t.uid,r=k.get(n);r&&(r.unsubscribe(),k.delete(n))}})}M.expose=it;typeof self<"u"&&typeof self.addEventListener=="function"&&v.default.isWorkerRuntime()&&(self.addEventListener("error",e=>{setTimeout(()=>B(e.error||e),250)}),self.addEventListener("unhandledrejection",e=>{let t=e.reason;t&&typeof t.message=="string"&&setTimeout(()=>B(t),250)}));typeof process<"u"&&typeof process.on=="function"&&v.default.isWorkerRuntime()&&(process.on("uncaughtException",e=>{setTimeout(()=>B(e),250)}),process.on("unhandledRejection",e=>{e&&typeof e.message=="string"&&setTimeout(()=>B(e),250)}))});var $=Ve(he(),1),Pe=$.default.expose,Ot=$.default.registerSerializer,me=$.default.Transfer;var I={x:0,y:1,z:2};function j(e,t={}){let{start:n=0,end:r=e.length,plane:o="xy"}=t,s=t.size||2,i=0,l=I[o[0]],u=I[o[1]];for(let c=n,f=r-s;c<r;c+=s)i+=(e[c+l]-e[f+l])*(e[c+u]+e[f+u]),f=c;return i/2}function Q(e,t,n=2,r,o="xy"){let s=t&&t.length,i=s?t[0]*n:e.length,l=ve(e,0,i,n,!0,r&&r[0],o),u=[];if(!l||l.next===l.prev)return u;let c,f,a,d,P,p,m;if(s&&(l=gt(e,t,l,n,r,o)),e.length>80*n){d=f=e[0],P=a=e[1];for(let h=n;h<i;h+=n)p=e[h],m=e[h+1],p<d&&(d=p),m<P&&(P=m),p>f&&(f=p),m>a&&(a=m);c=Math.max(f-d,a-P),c=c!==0?32767/c:0}return A(l,u,n,d,P,c,0),u}function ve(e,t,n,r,o,s,i){let l,u;s===void 0&&(s=j(e,{start:t,end:n,size:r,plane:i}));let c=I[i[0]],f=I[i[1]];if(o===s<0)for(l=t;l<n;l+=r)u=Me(l,e[l+c],e[l+f],u);else for(l=n-r;l>=t;l-=r)u=Me(l,e[l+c],e[l+f],u);return u&&H(u,u.next)&&(W(u),u=u.next),u}function w(e,t){if(!e)return e;t||(t=e);let n=e,r;do if(r=!1,!n.steiner&&(H(n,n.next)||x(n.prev,n,n.next)===0)){if(W(n),n=t=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==t);return t}function A(e,t,n,r,o,s,i){if(!e)return;!i&&s&&ht(e,r,o,s);let l=e,u,c;for(;e.prev!==e.next;){if(u=e.prev,c=e.next,s?ut(e,r,o,s):ct(e)){t.push(u.i/n|0),t.push(e.i/n|0),t.push(c.i/n|0),W(e),e=c.next,l=c.next;continue}if(e=c,e===l){i?i===1?(e=ft(w(e),t,n),A(e,t,n,r,o,s,2)):i===2&&at(e,t,n,r,o,s):A(w(e),t,n,r,o,s,1);break}}}function ct(e){let t=e.prev,n=e,r=e.next;if(x(t,n,r)>=0)return!1;let o=t.x,s=n.x,i=r.x,l=t.y,u=n.y,c=r.y,f=o<s?o<i?o:i:s<i?s:i,a=l<u?l<c?l:c:u<c?u:c,d=o>s?o>i?o:i:s>i?s:i,P=l>u?l>c?l:c:u>c?u:c,p=r.next;for(;p!==t;){if(p.x>=f&&p.x<=d&&p.y>=a&&p.y<=P&&E(o,l,s,u,i,c,p.x,p.y)&&x(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function ut(e,t,n,r){let o=e.prev,s=e,i=e.next;if(x(o,s,i)>=0)return!1;let l=o.x,u=s.x,c=i.x,f=o.y,a=s.y,d=i.y,P=l<u?l<c?l:c:u<c?u:c,p=f<a?f<d?f:d:a<d?a:d,m=l>u?l>c?l:c:u>c?u:c,h=f>a?f>d?f:d:a>d?a:d,Y=q(P,p,t,n,r),ee=q(m,h,t,n,r),g=e.prevZ,y=e.nextZ;for(;g&&g.z>=Y&&y&&y.z<=ee;){if(g.x>=P&&g.x<=m&&g.y>=p&&g.y<=h&&g!==o&&g!==i&&E(l,f,u,a,c,d,g.x,g.y)&&x(g.prev,g,g.next)>=0||(g=g.prevZ,y.x>=P&&y.x<=m&&y.y>=p&&y.y<=h&&y!==o&&y!==i&&E(l,f,u,a,c,d,y.x,y.y)&&x(y.prev,y,y.next)>=0))return!1;y=y.nextZ}for(;g&&g.z>=Y;){if(g.x>=P&&g.x<=m&&g.y>=p&&g.y<=h&&g!==o&&g!==i&&E(l,f,u,a,c,d,g.x,g.y)&&x(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;y&&y.z<=ee;){if(y.x>=P&&y.x<=m&&y.y>=p&&y.y<=h&&y!==o&&y!==i&&E(l,f,u,a,c,d,y.x,y.y)&&x(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function ft(e,t,n){let r=e;do{let o=r.prev,s=r.next.next;!H(o,s)&&Se(o,r,r.next,s)&&V(o,s)&&V(s,o)&&(t.push(o.i/n|0),t.push(r.i/n|0),t.push(s.i/n|0),W(r),W(r.next),r=e=s),r=r.next}while(r!==e);return w(r)}function at(e,t,n,r,o,s){let i=e;do{let l=i.next.next;for(;l!==i.prev;){if(i.i!==l.i&&Mt(i,l)){let u=ze(i,l);i=w(i,i.next),u=w(u,u.next),A(i,t,n,r,o,s,0),A(u,t,n,r,o,s,0);return}l=l.next}i=i.next}while(i!==e)}function gt(e,t,n,r,o,s){let i=[],l,u,c,f,a;for(l=0,u=t.length;l<u;l++)c=t[l]*r,f=l<u-1?t[l+1]*r:e.length,a=ve(e,c,f,r,!1,o&&o[l+1],s),a===a.next&&(a.steiner=!0),i.push(mt(a));for(i.sort(yt),l=0;l<i.length;l++)n=dt(i[l],n);return n}function yt(e,t){return e.x-t.x}function dt(e,t){let n=pt(e,t);if(!n)return t;let r=ze(n,e);return w(r,r.next),w(n,n.next)}function pt(e,t){let n=t,r=e.x,o=e.y,s=-1/0,i;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){let d=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(d<=r&&d>s&&(s=d,i=n.x<n.next.x?n:n.next,d===r))return i}n=n.next}while(n!==t);if(!i)return null;let l=i,u=i.x,c=i.y,f=1/0,a;n=i;do r>=n.x&&n.x>=u&&r!==n.x&&E(o<c?r:s,o,u,c,o<c?s:r,o,n.x,n.y)&&(a=Math.abs(o-n.y)/(r-n.x),V(n,e)&&(a<f||a===f&&(n.x>i.x||n.x===i.x&&xt(i,n)))&&(i=n,f=a)),n=n.next;while(n!==l);return i}function xt(e,t){return x(e.prev,e,t.prev)<0&&x(t.next,e,e.next)<0}function ht(e,t,n,r){let o=e;do o.z===0&&(o.z=q(o.x,o.y,t,n,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,Pt(o)}function Pt(e){let t,n,r=1,o,s,i,l,u,c;do{for(s=e,e=null,c=null,o=0;s;){for(o++,l=s,i=0,n=0;n<r&&(i++,l=l.nextZ,!!l);n++);for(u=r;i>0||u>0&&l;)i!==0&&(u===0||!l||s.z<=l.z)?(t=s,s=s.nextZ,i--):(t=l,l=l.nextZ,u--),c?c.nextZ=t:e=t,t.prevZ=c,c=t;s=l}c.nextZ=null,r*=2}while(o>1);return e}function q(e,t,n,r,o){return e=(e-n)*o|0,t=(t-r)*o|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function mt(e){let t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}function E(e,t,n,r,o,s,i,l){return(o-i)*(t-l)>=(e-i)*(s-l)&&(e-i)*(r-l)>=(n-i)*(t-l)&&(n-i)*(s-l)>=(o-i)*(r-l)}function Mt(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!vt(e,t)&&(V(e,t)&&V(t,e)&&St(e,t)&&(x(e.prev,e,t.prev)||x(e,t.prev,t))||H(e,t)&&x(e.prev,e,e.next)>0&&x(t.prev,t,t.next)>0)}function x(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function H(e,t){return e.x===t.x&&e.y===t.y}function Se(e,t,n,r){let o=R(x(e,t,n)),s=R(x(e,t,r)),i=R(x(n,r,e)),l=R(x(n,r,t));return!!(o!==s&&i!==l||o===0&&F(e,n,t)||s===0&&F(e,r,t)||i===0&&F(n,e,r)||l===0&&F(n,t,r))}function F(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function R(e){return e>0?1:e<0?-1:0}function vt(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Se(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function V(e,t){return x(e.prev,e,e.next)<0?x(e,t,e.next)>=0&&x(e,e.prev,t)>=0:x(e,t,e.prev)<0||x(e,e.next,t)<0}function St(e,t){let n=e,r=!1,o=(e.x+t.x)/2,s=(e.y+t.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&o<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e);return r}function ze(e,t){let n=new Z(e.i,e.x,e.y),r=new Z(t.i,t.x,t.y),o=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function Me(e,t,n,r){let o=new Z(e,t,n);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function W(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}var Z=class{constructor(t,n,r){this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1,this.i=t,this.x=n,this.y=r}};function Ce(e){return"data"in e?e.getChildAt(0):e.children[0]}function Le(e){return"data"in e?e.getChildAt(0):e.children[0]}function we(e){return"data"in e?e.getChildAt(0):e.children[0]}function X(e){if("data"in e)return e.data.map(s=>X(s));let t=[],n=0;for(let s=0;s<e.length;s++){let i=Lt(e,s);t.push(i),n+=i.length}let r=new Uint32Array(n),o=0;for(let s of t)for(let i of s)r[o]=i,o+=1;return r}function Lt(e,t){let n=e.valueOffsets,r=we(e),o=r.valueOffsets,s=Le(r),i=s.type.listSize,l=Ce(s),u=n[t],c=n[t+1],f=o[u],a=o[c],d=l.values.subarray(f*i,a*i),P=o[u],p=[];for(let h=u+1;h<c;h++)p.push(o[h]-P);let m=Q(d,p,i);for(let h=0;h<m.length;h++)m[h]+=P;return m}function wt(e){let t=X(e);return me(t,[t.buffer])}Pe(wt);
